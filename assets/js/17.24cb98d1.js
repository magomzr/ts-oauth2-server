(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{283:function(e,t,s){"use strict";s.r(t);var a=s(13),r=Object(a.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"refresh-token-grant"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#refresh-token-grant"}},[e._v("#")]),e._v(" Refresh Token Grant")]),e._v(" "),t("p",[e._v("Access tokens eventually expire. The refresh token grant enables the client to obtain a new access_token from an existing refresh_token.")]),e._v(" "),t("h3",{attrs:{id:"flow"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flow"}},[e._v("#")]),e._v(" Flow")]),e._v(" "),t("p",[e._v("A complete refresh token request will include the following parameters:")]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("grant_type")]),e._v(" must be set to "),t("code",[e._v("refresh_token")])]),e._v(" "),t("li",[t("strong",[e._v("client_id")]),e._v(" is the client identifier you received when you first created the application")]),e._v(" "),t("li",[t("strong",[e._v("client_secret")]),e._v(" if the client is confidential (has a secret), this must be provided")]),e._v(" "),t("li",[t("strong",[e._v("refresh_token")]),e._v(" must be the signed token previously issued to the client")]),e._v(" "),t("li",[t("strong",[e._v("scope")]),e._v(" (optional) the requested scope must not include any additional scopes that were not previously issued to the original token")])]),e._v(" "),t("details",{staticClass:"custom-block details"},[t("summary",[e._v("View sample refresh_token request")]),e._v(" "),t("code-group",[t("code-block",{attrs:{title:"Query String",active:""}},[t("div",{staticClass:"language-http request extra-class"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token request-line"}},[t("span",{pre:!0,attrs:{class:"token method property"}},[e._v("POST")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token request-target url"}},[e._v("/token")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token http-version property"}},[e._v("HTTP/1.1")])]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Host")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token header-value"}},[e._v("example.com")])]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Content-Type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token header-value"}},[e._v("application/x-www-form-urlencoded")])]),e._v('\n\ngrant_type=refresh_token\n&refresh_token=xxxxxxxxx\n&client_id=xxxxxxxxx\n&client_secret=xxxxxxxxx\n&scope="contacts.read contacts.write"\n')])])])]),e._v(" "),t("code-block",{attrs:{title:"Basic Auth"}},[t("div",{staticClass:"language-http request extra-class"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token request-line"}},[t("span",{pre:!0,attrs:{class:"token method property"}},[e._v("POST")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token request-target url"}},[e._v("/token")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token http-version property"}},[e._v("HTTP/1.1")])]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Host")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token header-value"}},[e._v("example.com")])]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Authorization")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token header-value"}},[e._v("Basic Y4NmE4MzFhZGFkNzU2YWRhN")])]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Content-Type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token header-value"}},[e._v("application/x-www-form-urlencoded")])]),e._v('\n\ngrant_type=refresh_token\n&refresh_token=xxxxxxxxx\n&scope="contacts.read contacts.write"\n')])])])])],1)],1),e._v(" "),t("p",[e._v("The authorization server will respond with the following response")]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("token_type")]),e._v(" will always be "),t("code",[e._v("Bearer")])]),e._v(" "),t("li",[t("strong",[e._v("expires_in")]),e._v(" is the time the token will live in seconds")]),e._v(" "),t("li",[t("strong",[e._v("access_token")]),e._v(" is a JWT signed token and is used to authenticate into the resource server")]),e._v(" "),t("li",[t("strong",[e._v("refresh_token")]),e._v(" is a JWT signed token and can be used in with the "),t("a",{attrs:{href:"#refresh-token-grant"}},[e._v("refresh grant")])]),e._v(" "),t("li",[t("strong",[e._v("scope")]),e._v(" is a space delimited list of scopes the token has access to")])]),e._v(" "),t("details",{staticClass:"custom-block details"},[t("summary",[e._v("View sample refresh_token response")]),e._v(" "),t("div",{staticClass:"language-http request extra-class"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token response-status"}},[t("span",{pre:!0,attrs:{class:"token http-version property"}},[e._v("HTTP/1.1")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token status-code number"}},[e._v("200")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token reason-phrase string"}},[e._v("OK")])]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Content-Type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token header-value"}},[e._v("application/json; charset=UTF-8")])]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Cache-Control")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token header-value"}},[e._v("no-store")])]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Pragma")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token header-value"}},[e._v("no-cache")])]),e._v("\n\n{\n  token_type: 'Bearer',\n  expires_in: 3600,\n  access_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1MTJhYjlhNC1jNzg2LTQ4YTYtOGFkNi05NGM1M2E4ZGM2NTEiLCJleHAiOjE2MDE3NjcyMTIsIm5iZiI6MTYwMTc2MzYxMiwiaWF0IjoxNjAxNzYzNjEyLCJqdGkiOiJuZXcgdG9rZW4iLCJjaWQiOiJ0ZXN0IGNsaWVudCIsInNjb3BlIjoiIn0.PO4eKSDVsFuKvebEXndWbZsprgzjkzEfHI7cl4N0YpM',\n  refresh_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRfaWQiOiIzNTYxNWYyZi0xM2ZhLTQ3MzEtODNhMS05ZTM0NTU2YWIzOTAiLCJhY2Nlc3NfdG9rZW5faWQiOiJuZXcgdG9rZW4iLCJyZWZyZXNoX3Rva2VuX2lkIjoidGhpcy1pcy1teS1zdXBlci1zZWNyZXQtcmVmcmVzaC10b2tlbiIsInNjb3BlIjoiIiwidXNlcl9pZCI6IjUxMmFiOWE0LWM3ODYtNDhhNi04YWQ2LTk0YzUzYThkYzY1MSIsImV4cGlyZV90aW1lIjoxNjAxNzY3MjEyLCJpYXQiOjE2MDE3NjM2MTF9.du4KfAzelSA8hzBaqGlrSvPtH-BxOcoUBXW4HS3pJkM',\n  scope: 'contacts.read contacts.write'\n}\n")])])])]),e._v(" "),t("h3",{attrs:{id:"revocation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#revocation"}},[e._v("#")]),e._v(" Revocation")]),e._v(" "),t("p",[e._v("Refresh tokens are only valid for a single use. In addition, they can be explicitly revoked on a server that supports\n"),t("a",{attrs:{href:"https://tools.ietf.org/html/rfc7009",target:"_blank",rel:"noopener noreferrer"}},[e._v("RFC7009 “OAuth 2.0 Token Revocation”"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("p",[e._v("A refresh token revocation request will include the following parameters:")]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("token")]),e._v(" is the signed token previously issued to the client")]),e._v(" "),t("li",[t("strong",[e._v("token_type_hint")]),e._v(" (optional) should be set to "),t("code",[e._v("refresh_token")])])]),e._v(" "),t("details",{staticClass:"custom-block details"},[t("summary",[e._v("View sample revoke refresh_token request")]),e._v(" "),t("div",{staticClass:"language-http request extra-class"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token request-line"}},[t("span",{pre:!0,attrs:{class:"token method property"}},[e._v("POST")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token request-target url"}},[e._v("/token")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token http-version property"}},[e._v("HTTP/1.1")])]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Host")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token header-value"}},[e._v("example.com")])]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Content-Type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token header-value"}},[e._v("application/x-www-form-urlencoded")])]),e._v("\n\ntoken_type_hint=refresh_token\n&refresh_token=xxxxxxxxx\n")])])])]),e._v(" "),t("p",[e._v("The authorization server will respond with the following response")]),e._v(" "),t("details",{staticClass:"custom-block details"},[t("summary",[e._v("View sample revoke refresh_token response")]),e._v(" "),t("div",{staticClass:"language-http request extra-class"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token response-status"}},[t("span",{pre:!0,attrs:{class:"token http-version property"}},[e._v("HTTP/1.1")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token status-code number"}},[e._v("200")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token reason-phrase string"}},[e._v("OK")])]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Cache-Control")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token header-value"}},[e._v("no-store")])]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Pragma")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token header-value"}},[e._v("no-cache")])]),e._v("\n")])])])])])}),[],!1,null,null,null);t.default=r.exports}}]);